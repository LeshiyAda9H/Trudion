# Техническое задание (ТЗ)
## Наименование проекта: Trudion
## Введение
Современное общество сталкивается с множеством проблем, связанных с организацией взаимодействия между людьми в различных сферах: от образования и науки до технологий и искусства. Несмотря на обилие существующих платформ, таких как социальные сети или специализированные образовательные сервисы, большинство из них не способны обеспечить пользователям удобный поиск напарников для совместного изучения, работы над проектами или подготовки к экзаменам. 

Основные трудности заключаются в:

-	Отсутствии точных алгоритмов подбора единомышленников по интересам и целям.
-	Нехватке инструментов для эффективной коммуникации и взаимодействия.
-	Недостаточной интеграции современных технологий для оптимизации учебного процесса.

Эти проблемы создают значительные барьеры для совместного обучения и обмена знаниями. В эпоху цифровизации общества необходимость в качественном и доступном решении становится особенно актуальной.

Проект **"Trudion"** нацелен на решение данной проблемы путём создания инновационного веб-сервиса. Основная цель платформы — предоставить пользователям инструменты для поиска напарников по интересам и предпочтениям, а также обеспечить удобное взаимодействие через чаты и уведомления. 

Таким образом, **"Trudion"** становится универсальным решением для объединения людей с общими учебными целями, способствуя развитию навыков, обмену опытом и достижению образовательных целей.

## Основные функции
### Presentation Layer (Frontend):
#### Страницы:
##### 1. Авторизация:
- Заполнение полей: **email** и **password**
- Валидация данных
- Переход на страницу:
    - Регистрации 
    - Забыл пароль
##### 2. Регистрация:
- Обязательное заполнение полей: 
    - **email**
    - **password** и **confirmPassword**, 
    - **username** 
    - **gender**
- Необязательное заполнение полей: 
    - **avatar**
    - **biography**
    - **label**
##### 3. Профиль:
- Обновление полей:
    - **avatar**
    - **gender**
    - **username**
    - **biography**
    - **label**
##### 4. Главная (страница для поиска напарников)
- **Фильтр**:
    - Поиск по количеству пользователей
    - Поиск по label
    - Кнопка применить фильтр
    - Кнопка сбросить фильтр
- **Навигационная панель** (функции описаны ниже)
- **Карточки пользователей**
    - Возможность нажатия на пользователя и увидеть полную информацию о нём
    - Кнопка **"Дружить"** (процесс отправки лайка)
    - Опционная кнопка: **"Пожаловаться"**, **"Заблокировать"**
- 
##### 5. Коммуникаций
###### 5.1 Подстраница "Чат"
Интерфейс с подружившимися пользователями 
- **Поле с подружившимися пользователями**
    - Username
    - Статус (online/offline)
    - Последнее сообщение
    - Есть возможностью прожатия для открытия интерфейса **"Чат"**
    
- **Чат**: 
    - Интерфейс диалога: сообщения и время
    - Поле для написания сообщения
    - Кнопка отправки сообщения 
- **Переход на подстраницу "Место встреч"**

###### 5.2 Подстраница "Место встреч"
Интерфейс с возможными друзьями
- **Карты пользователей**
    - Возможность нажатия на пользователя и увидеть полную информацию о нём
        - Карта пользователя с полной информацией
        - Кнопка принять
        - Кнопка отклонить
    - Кнопка принять
    - Кнопка отклонить
- **Переход на подстраницу "Чат"**

#### Навигационная панель:
- Переход на **"Главная страница"**
- Переход на **"Страница коммуникаций"**
- Кнопка **"Уведомления"**
    - Возможность показать последние события
- Кнопка **"Настройки"**
    - Возможность выхода из аккаунта
- Переход на **"Страница профиль"**

### Business Logic Layer (BL Layer):
- Регистрация, авторизация и генерация токена пользователя
- Поиск людей по маркерам
- Упорядочение пользователей по интересам
- Редактирование профиля
- Обмен сообщениями (чаты)
- Чат с техподдержкой*
- Механизм банов пользователей*

### Data Service Layer:
- Получение и изменение информации профиля
- Создание новых профилей
- Получение истории переписки
- Фильтрация пользователей по маркерам
- Проверка лайков и количества маркеров
- Получение списка уведомлений*

### Database Layer:
- Модель данных представлена на ER-диаграмме (см. прикрепленное изображение).



# Данные
## Для каждого элемента данных - ограничения
- **Пользователи (user)**: 
  - Уникальность **email** и **id**.
  - Поля обязательные для заполнения: **email**, **password**, **username**, **gender**.

- **Маркеры (labels)**:
  - Уникальность идентификатора маркера.
  - Ограничение на максимальное количество маркеров 3, связанных с одним пользователем.

- **Лайки (likes)**: 
  - Симпатии между пользователями

- **Совпадения (matches)**:
  - Заложение дружбы между пользователями

- **Сообщения**:
  - Сообщения могут быть отправлены только между пользователями, имеющими взаимную заинтересованность.
- **Уведомления***:
  - Статус уведомления (прочитано/непрочитано).
- **Блокировки***:
  - Сохранение даты и времени блокировки.

## Общие ограничения целостности
- Обеспечение референциальной целостности между таблицами (например, связи между пользователями и маркерами).
- Валидация данных на этапе ввода, включая проверку форматов email и других ключевых данных.
- Логирование всех изменений данных для анализа и отката изменений.

## ER-диаграмма
Прикрепленная диаграмма отражает структуру данных и связи между таблицами. 

![image](https://github.com/user-attachments/assets/55ef36c9-23f2-404a-98e9-c5559eb800b7)

# Пользовательские роли

## Стандартный пользователь
- **Наименование**: Стандартный пользователь.
- **Ответственность**: Регистрация, авторизация, редактирование профиля, поиск напарников, обмен сообщениями, просмотр уведомлений.
- **Количество пользователей в этой роли**: Потенциально неограниченное.

## Администратор
- **Наименование**: Администратор.
- **Ответственность**: Управление пользователями, модерация контента, блокировка нарушителей, поддержание системы.
- **Количество пользователей в этой роли**: Ограниченное.

# UI / API 
## UI: 
Дизайн интерфейса выполнен в Figma, реализован с использованием Vue.js (TypeScript).

### Цветовая палитра:
- Основные цвета фона, текста и кнопок (#FFFFFF, #000000, #355299 и другие)
- Цвета ошибок: #993535, #B18888
### Шрифты: 
- IBM Plex Sans (размеры и начертания для заголовков и текста)

### Скругления элементов:
- Объекты — 30px
- Кнопки — 40px

### UI-kit
![image]()

## API: 
**REST API** для взаимодействия с сервером. Основные эндпоинты:
- ```/api/v1/verify/email``` (Проверка email)
- ```/api/v1/register``` (Регистрация)
- ```/api/v1/login``` (Авторизация)
- ```/api/v1/logout``` (Выход из аккаунта)
- ```/api/v1/profile``` (Управление профилем пользователя)
- ```/api/v1/usersnumber``` (Поиск единомышленников)
- ```/api/v1/handshake``` (Проявление заинтересованности)
- ```/api/v1/matches/...```
    - ```.../accept``` (Взаимолайк)
    - ```.../decline``` (Односторонний лайк)
- ```/api/v1/notifications``` (Управление уведомлениями)
- ```/api/v1/messages``` (Обмен сообщениями)


**Swagger** в наличии.

# Технологии разработки
## Выбранные инструменты:
В проекте были применены различные инструменты и технологии для реализации функциональности, обеспечения производительности и удобства работы команды.
### 1.	Frontend: Vue.js (TypeScript)
-	**Оценка**: Vue.js был выбран за его удобство в разработке компонентов, высокую производительность и гибкость. TypeScript добавил строгую типизацию, что повысило стабильность кода.
-	**Использование**: Vue.js применялся для создания интерактивных пользовательских интерфейсов, включая страницы авторизации, регистрации, поиска напарников и чатов.
-	Изучение: Основой для работы служила официальная документация Vue.js.
### 2.	Backend: Golang
-	**Оценка**: Golang обеспечил высокую производительность и простоту масштабирования серверной части. Его лаконичность и встроенные инструменты ускорили разработку.
-	**Использование**: Реализация серверной логики, API и обеспечения безопасности (например, хэширование паролей с использованием соли).
-	Изучение: Использовались официальная документация Golang и курс на Stepik. Дополнительно проводились занятия по "Технологии Интернет и WEB-программирования" под руководством преподавателя Коваленко Л. А.

### 3.	СУБД: PostgreSQL
-	**Оценка**: PostgreSQL была выбрана за её мощные возможности работы с реляционными данными и поддержку сложных запросов.
-	**Использование**: Хранение данных пользователей, сообщений, уведомлений и предпочтений.
-	**Изучение**: Работа с PostgreSQL базировалась на официальной документации и лекциях по "База данных" от преподавателя Коровкина М.В.

### 4.	UI Design: Figma
-	**Оценка**: Инструмент позволил быстро проектировать и вносить изменения в макеты страниц.
-	**Использование**: Разработка макетов для страниц приложения (профиля, поиска, чатов).
-	**Изучение**: Использовались встроенные обучающие материалы Figma и эксперименты в процессе работы.

### 5.	Среда разработки: Visual Studio Code, IntelliJ IDEA
-	**Оценка**: Обе среды поддерживают множество плагинов, которые ускоряют написание и отладку кода.
-	**Использование**: Visual Studio Code использовался для разработки фронтенда, IntelliJ IDEA — для бэкенда.

### 6.	Трекер задач: Yandex Tracker, Telegram
-	**Оценка**: Yandex Tracker обеспечил удобство в управлении задачами, а Telegram упростил коммуникацию команды.
-	**Использование**: Планирование, распределение задач, отслеживание прогресса.

### 7.	PlantUML и Miro
-	**PlantUML**: Использовался для построения диаграмм (диаграммы последовательности, классов и компонентов). Официальная документация.
-	**Miro**: Применялся для визуализации архитектуры и совместной работы над диаграммами. Документация Miro.
### 8.	DBeaver
-	**Оценка**: DBeaver упростил работу с базами данных, предоставив графический интерфейс.
-	**Использование**: Проверка и редактирование данных, выполнение запросов. Официальный сайт DBeaver.

### 9.	drawSQL
-	**Оценка**: Инструмент визуализации схем баз данных.
-	**Использование**: Создание ER-диаграммы базы данных. drawSQL.

### 10.	Docker
-	**Оценка**: Docker позволил упаковать приложение в контейнеры для удобного развертывания.
-	**Использование**: Создание и настройка образов для фронтенда и бэкенда.
-	**Изучение**: Использовалась официальная документация Docker.

### 11.	GitHub
-	**Оценка**: GitHub обеспечил централизованное хранение кода, удобное управление версиями и возможность работы нескольких разработчиков.
-	**Использование**: Хранение исходного кода и документации. Репозиторий проекта.
### 12.	Swagger
-	**Оценка**: Swagger упростил документирование API и тестирование эндпоинтов.
-	**Использование**: Генерация интерактивной документации для API. Документация Swagger.


### 13.	Онлайн-встречи: Google Meet
-	**Оценка**: Удобный инструмент для удалённых совещаний.
-	**Использование**: Проведение встреч команды для планирования и обсуждения прогресса.

### Поддержка преподавателей
Ключевыми консультантами были Коваленко Л.А. и Коровкин М.В., которые предоставляли комментарии и рекомендации.

# Тестирование*

- Юнит-тесты для проверки отдельных модулей и функций.
- Интеграционные тесты для проверки взаимодействия компонентов системы.
- Нагрузочное тестирование для оценки производительности при увеличении числа пользователей.
- Тестирование интерфейса для проверки удобства и корректности UI.
- Тестирование безопасности, включая проверку на уязвимости (например, SQL-инъекции и XSS).


# Дополнительно*
## Транзакции: 
### Описание операций, например:
- Создание нового профиля: транзакция включает создание записи в **Users** и начальную настройку **User_labels**.
- Отправка сообщения: запись в **Messages** с обновлением времени последней активности пользователя.


## Скрипты для развертывания системы
### Описание структур данных
В реализации использовался язык **Golang**, а также библиотека **GORM** для работы с базами данных. При запуске приложения происходят миграции баз данных в соответствии со структурами данных, определенных в файле **models.go**. Это требуется для корректной работы **GORM**
