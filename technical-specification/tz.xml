<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE technical_specification SYSTEM "technical_specification.dtd">
<technical_specification>
    <project>
        <name>Trudion</name>
        <description>Trudion — это веб-сервис, который позволяет пользователям находить напарников для совместного изучения различных дисциплин и тем, таких как иностранные языки, программирование, подготовка к экзаменам и решение математических задач. Основной функционал сервиса строится на подборе пользователей по интересам и предпочтениям с возможностью коммуникации через чаты и уведомления.</description>
    </project>
    <functions>
        <presentation_layer>
            <pages>
                <page>Авторизации</page>
                <page>Регистрации</page>
                <page>Профиля</page>
                <page>Главная (страница для поиска напарников)</page>
                <page>Коммуникаций</page>
            </pages>
            <navigation>
                <item>Переход на главную страницу</item>
                <item>Переход на страницу коммуникаций</item>
                <item>Панель уведомлений</item>
                <item>Панель настроек</item>
                <item>Переход на страницу профиля</item>
            </navigation>
        </presentation_layer>
        <bl_layer>
            <function>Регистрация, авторизация и генерация токена пользователя</function>
            <function>Поиск людей по маркерам</function>
            <function>Упорядочение пользователей по интересам</function>
            <function>Редактирование профиля</function>
            <function>Обмен сообщениями (чаты)</function>
            <function>Чат с техподдержкой</function>
            <function>Механизм банов пользователей</function>
        </bl_layer>
        <data_service_layer>
            <function>Получение и изменение информации профиля</function>
            <function>Создание новых профилей</function>
            <function>Получение истории переписки</function>
            <function>Фильтрация пользователей по маркерам</function>
            <function>Проверка лайков и количества маркеров</function>
            <function>Получение списка уведомлений</function>
        </data_service_layer>
        <database_layer>
            <description>Модель данных представлена на ER-диаграмме.</description>
        </database_layer>
    </functions>
    <roles>
        <role>
            <name>Стандартный пользователь</name>
            <description>Может регистрироваться, редактировать профиль, искать напарников, обмениваться сообщениями, получать уведомления.</description>
            <responsibility>Активное использование системы для поиска напарников.</responsibility>
            <user_count>Потенциально неограниченное</user_count>
        </role>
        <role>
            <name>Администратор</name>
            <description>Управляет системой, блокирует пользователей, обеспечивает поддержку.</description>
            <responsibility>Поддержание работоспособности и безопасности системы.</responsibility>
            <user_count>Ограниченное</user_count>
        </role>
    </roles>
    <technology_stack>
        <frontend>Vue.ts</frontend>
        <backend>Golang</backend>
        <database>PostgreSQL</database>
        <ui_design>Разработка интерфейсов в Figma с последующей реализацией на frontend.</ui_design>
    </technology_stack>
    <data_constraints>
        <data>
            <item>Пользователи: данные о профиле, статусе и предпочтениях</item>
            <item>Маркеры (labels): интересы и фильтры для поиска</item>
            <item>Сообщения: переписка между пользователями</item>
            <item>Уведомления: статус взаимодействий</item>
            <item>Лайки: симпатии между пользователями</item>
            <item>Блокировки: данные о заблокированных пользователях</item>
        </data>
        <integrity_constraints>
            <constraint>Уникальность email и username для каждого пользователя</constraint>
            <constraint>Проверка корректности маркеров (связи с таблицей Labels_info)</constraint>
            <constraint>Ограничение на отправку сообщений (например, только между взаимно заинтересованными пользователями)</constraint>
        </integrity_constraints>
    </data_constraints>
    <ui_details>
        <colors>
            <color name="фон" code="#FFFFFF"/>
            <color name="текст" code="#000000"/>
            <color name="кнопка" code="#355299"/>
            <color name="текст 1" code="#8984B1"/>
            <color name="ошибка 1" code="#993535"/>
            <color name="ошибка 2" code="#B18888"/>
        </colors>
        <fonts>
            <font name="IBM Plex Sans">
                <size>72 bold (Заголовок 1)</size>
                <size>42 bold (Заголовок 2)</size>
                <size>24 bold (Заголовок 3)</size>
                <size>22 regular (Описание)</size>
            </font>
        </fonts>
        <rounded_elements>
            <object>30px</object>
            <button>40px</button>
        </rounded_elements>
    </ui_details>
    <er_diagram>
        <description>Основные таблицы: Users, Likes, Messages, Notifications, Blocks, Labels_info, User_labels</description>
    </er_diagram>
    <transactions>
        <transaction>
            <description>Создание нового профиля: транзакция включает создание записи в Users и начальную настройку User_labels.</description>
        </transaction>
        <transaction>
            <description>Отправка сообщения: запись в Messages с обновлением времени последней активности пользователя.</description>
        </transaction>
    </transactions>
</technical_specification>
